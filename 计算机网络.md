### 三次握手
```angular2html
1. 第一次握手：客户端向服务端发送 (syn seq=x) 客户端处于syn_send状态
2. 第二次握手：服务端向客户端发送 (syn seq=y ack=x+1) 服务端处于syn_receive状态
3. 第三次握手：客户端向服务端发送 (ack=y+1) 客户端服务端处于established状态
```

### 为何要进行三次握手
```angular2html
1. 第一次握手：可以确认客户端有发送数据能力
2. 第二次握手：可以确认服务端有接受和发送数据能力
3. 第三次握手：可以确认客户端有接受数据能力
```

### 断开链接四次挥手
```angular2html
1. 第一次挥手：客户端发送 (fin seq=x) 到服务端，并处于fin_wait_1状态
2. 第二次挥手：服务端发送 (ack=x+1) 到客户端，并处于close_wait状态，客户端处于fin_wait_2状态
3. 第三次挥手：服务端发送 (fin seq=y) 到客户端，并处于last_ack状态
4. 第四次挥手：客户端发送 (ack=y+1) 到服务端，服务端接收到close,客户端等待2msl没接收数据关闭
``` 
### 客户端为何等待2msl再关闭
```angular2html
服务端发送 fin 到客户端，服务端要等待客户端的ack,如果没收到客户端的ack，服务端会重复发送fin,
客户端等待是为了防止服务端持续重发fin
```

### TCP如何保证可靠数据传输
```angular2html
1. tcp链接，通过三次握手建立可靠的数据传输链路。
2. tcp会根据，数据报文头部校验和，校验数据的完整性，如果数据缺失则丢弃报文，让客户端重新传输。
3. 数据重传，数据包丢失情况下，会重传数据包直到收到对方发送的报文确认的ack。
4. 流量控制，接收方，通过控制发送方的发送窗口大小，来控制发送数据的速率。
5. 拥塞控制，发送方，发送数据会在网络上传输，如果网络不好，持续发送会导致网络拥塞，所以发送方维护一个拥塞窗口，发送方发送数据的大小
等于拥塞窗口和滑动窗口的最小值。
```
### TCP拥塞控制
```angular2html
1. 慢启动：拥塞窗口从1开始，每次数据传播*2
2. 拥塞避免：拥塞窗口到达一定阈值，开始缓慢增加，每次数据传播窗口+1
3. 快速重传与快速恢复，当发送方接受到三次重复的ack说明数据丢失，会发ack后面的数据。拥塞窗口再次变为1进入慢开始状态。
```

### HTTPS 如何保证数据安全
```angular2html
https: 使用非对称加密传输公钥，然后使用对称加密传输数据，保证数据传输的安全性。
为了保证公钥传输过程中不被篡改，引入第三方认证机构，保证公钥的准确性。过程如下:
 1. 客户端向服务端请求公钥，服务端会将自己的公钥发送给第三方认证机构，第三方认证机构会用私钥加密服务端的公钥生产数字签名，服务端将自己的公钥和数字签名发给客户端
 2. 客户端，使用第三方认证机构的公钥解密数字签名，得到公钥，与服务端传来的公钥对比，就可以发现公钥是否被修改，未修改则下面传输数据使用改公钥进行加密传输。
```
