### 秒杀系统如何设计
```angular2html
1. 如何防止超卖？
   将库存读入内存，存入redis中，判断库存是否充足，减少库存扣减成功，使用lua和redis进行库存扣减操作实现原子性。
2. 通过限流：如ip限流同一个ip只能请求10次。
3. 秒杀成功，离开返回数据给用户，后续的操作进入队列异步处理。mq只要存在消息一定要消费成功，如果消费失败也要有告警，和数据保存。人工及时处理。
```